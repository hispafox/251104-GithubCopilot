<UserControl x:Class="DemoWpf.Views.TaskStatisticsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
          xmlns:vm="clr-namespace:DemoWpf.ViewModels"
             d:DataContext="{d:DesignInstance Type=vm:TaskStatisticsViewModel}"
          mc:Ignorable="d"
    d:DesignHeight="450" d:DesignWidth="800">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
  <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
     </Grid.RowDefinitions>

    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Estadisticas del Sistema" 
           FontSize="24" 
             FontWeight="Bold"
   VerticalAlignment="Center"/>
    <Button Content="Actualizar"
           Command="{Binding LoadStatisticsCommand}"
           Margin="20,0,0,0"
    Padding="15,8"
             Background="#4A90E2"
         Foreground="White"
  BorderThickness="0"
          Cursor="Hand"/>
        </StackPanel>

     <Grid Grid.Row="1" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

 <Border Grid.Column="0" 
          Background="#E3F2FD"
          Padding="20"
             Margin="0,0,10,0"
 BorderBrush="#2196F3"
    BorderThickness="2"
       CornerRadius="8">
  <StackPanel>
             <TextBlock Text="Total de Listas" 
    FontSize="14" 
     Foreground="#1976D2"
     FontWeight="SemiBold"/>
        <TextBlock Text="{Binding TotalLists}" 
      FontSize="36" 
     FontWeight="Bold"
Foreground="#1565C0"
    Margin="0,5,0,0"/>
  <TextBlock Text="listas creadas" 
    FontSize="12" 
  Foreground="Gray"/>
       </StackPanel>
            </Border>

<Border Grid.Column="1" 
       Background="#E8F5E9"
                  Padding="20"
          Margin="5,0"
    BorderBrush="#4CAF50"
         BorderThickness="2"
   CornerRadius="8">
     <StackPanel>
     <TextBlock Text="Total de Tareas" 
      FontSize="14" 
       Foreground="#388E3C"
  FontWeight="SemiBold"/>
    <TextBlock Text="{Binding TotalTasks}" 
         FontSize="36" 
  FontWeight="Bold"
       Foreground="#2E7D32"
      Margin="0,5,0,0"/>
      <TextBlock Text="tareas en total" 
    FontSize="12" 
        Foreground="Gray"/>
     </StackPanel>
         </Border>

            <Border Grid.Column="2" 
         Background="#FFF3E0"
         Padding="20"
           Margin="10,0,0,0"
   BorderBrush="#FF9800"
         BorderThickness="2"
         CornerRadius="8">
    <StackPanel>
          <TextBlock Text="Completitud" 
             FontSize="14" 
        Foreground="#F57C00"
            FontWeight="SemiBold"/>
         <TextBlock Text="{Binding CompletionPercentage, StringFormat='{}{0:F1}%'}" 
    FontSize="36" 
               FontWeight="Bold"
              Foreground="{Binding CompletionColor}"
             Margin="0,5,0,0"/>
        <TextBlock Text="{Binding ProgressMessage}" 
         FontSize="12" 
    Foreground="Gray"/>
    </StackPanel>
     </Border>
   </Grid>

        <Grid Grid.Row="2">
          <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
           <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

    <Border Grid.Column="0" 
           Background="White"
        Padding="20"
         Margin="0,0,10,0"
        BorderBrush="#E0E0E0"
   BorderThickness="1"
                    CornerRadius="8">
     <StackPanel>
       <TextBlock Text="Estado de las Tareas" 
     FontSize="18" 
       FontWeight="SemiBold"
   Margin="0,0,0,15"/>

        <Grid Margin="0,0,0,10">
          <Grid.ColumnDefinitions>
   <ColumnDefinition Width="Auto"/>
       <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>

      <Ellipse Grid.Column="0" 
    Width="12" Height="12" 
          Fill="#FFC107"
      VerticalAlignment="Center"/>
        <TextBlock Grid.Column="1" 
  Text="Pendientes" 
             Margin="10,0"
    VerticalAlignment="Center"/>
                <TextBlock Grid.Column="2" 
              Text="{Binding PendingTasks}"
         FontWeight="Bold"
    VerticalAlignment="Center"/>
         </Grid>

          <Grid Margin="0,0,0,10">
                 <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
         <ColumnDefinition Width="*"/>
         <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>

       <Ellipse Grid.Column="0" 
          Width="12" Height="12" 
        Fill="#2196F3"
    VerticalAlignment="Center"/>
          <TextBlock Grid.Column="1" 
Text="En Progreso" 
           Margin="10,0"
       VerticalAlignment="Center"/>
      <TextBlock Grid.Column="2" 
        Text="{Binding InProgressTasks}"
       FontWeight="Bold"
VerticalAlignment="Center"/>
        </Grid>

      <Grid Margin="0,0,0,10">
           <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="Auto"/>
       </Grid.ColumnDefinitions>

  <Ellipse Grid.Column="0" 
          Width="12" Height="12" 
  Fill="#4CAF50"
         VerticalAlignment="Center"/>
       <TextBlock Grid.Column="1" 
              Text="Completadas" 
        Margin="10,0"
         VerticalAlignment="Center"/>
      <TextBlock Grid.Column="2" 
       Text="{Binding CompletedTasks}"
 FontWeight="Bold"
   VerticalAlignment="Center"/>
      </Grid>

       <Grid Margin="0,20,0,10">
     <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
             <ColumnDefinition Width="*"/>
  <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

               <Ellipse Grid.Column="0" 
           Width="12" Height="12" 
          Fill="#F44336"
        VerticalAlignment="Center"/>
      <TextBlock Grid.Column="1" 
  Text="Vencidas" 
 Margin="10,0"
                VerticalAlignment="Center"
        Foreground="#D32F2F"
    FontWeight="SemiBold"/>
        <TextBlock Grid.Column="2" 
         Text="{Binding OverdueTasks}"
    FontWeight="Bold"
         Foreground="#D32F2F"
          VerticalAlignment="Center"/>
  </Grid>

          <ProgressBar Value="{Binding CompletionPercentage}"
     Height="30"
 Margin="0,20,0,0"
      Foreground="{Binding CompletionColor}"/>
    </StackPanel>
  </Border>

            <Border Grid.Column="1" 
     Background="White"
                 Padding="20"
   Margin="10,0,0,0"
    BorderBrush="#E0E0E0"
       BorderThickness="1"
      CornerRadius="8">
          <StackPanel>
<TextBlock Text="Por Prioridad" 
       FontSize="18" 
      FontWeight="SemiBold"
  Margin="0,0,0,15"/>

       <ItemsControl ItemsSource="{Binding PriorityStats}">
   <ItemsControl.ItemTemplate>
     <DataTemplate>
    <Border Background="{Binding Color}"
Padding="15,10"
             Margin="0,0,0,10"
        CornerRadius="5">
 <Grid>
        <Grid.ColumnDefinitions>
                 <ColumnDefinition Width="*"/>
     <ColumnDefinition Width="Auto"/>
       </Grid.ColumnDefinitions>
  <TextBlock Grid.Column="0" 
  Text="{Binding Name}"
            Foreground="White"
                FontWeight="SemiBold"/>
     <TextBlock Grid.Column="1" 
        Text="{Binding Count}"
      Foreground="White"
  FontWeight="Bold"
        FontSize="18"/>
    </Grid>
             </Border>
        </DataTemplate>
                </ItemsControl.ItemTemplate>
          </ItemsControl>
    </StackPanel>
            </Border>
    </Grid>

        <Grid Grid.Row="0" Grid.RowSpan="3"
  Background="#80000000"
        Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Cargando estadisticas..." 
     Foreground="White"
   FontSize="18"
                  FontWeight="SemiBold"
       HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
