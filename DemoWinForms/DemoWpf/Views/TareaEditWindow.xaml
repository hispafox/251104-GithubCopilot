<Window
    x:Class="DemoWpf.Views.TareaEditWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DemoWpf.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="{Binding IsEditMode, Converter={StaticResource EditModeTitleConverter}}"
    Width="650"
    Height="650"
    ResizeMode="CanResize"
  MinWidth="600"
    MinHeight="650"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Grid Margin="20">
        <Grid.RowDefinitions>
       <RowDefinition Height="Auto" />
         <RowDefinition Height="*" />
       <RowDefinition Height="Auto" />
 </Grid.RowDefinitions>

        <TextBlock
      Grid.Row="0"
         Margin="0,0,0,20"
      FontSize="20"
  FontWeight="Bold"
     Text="{Binding IsEditMode, Converter={StaticResource EditModeTitleConverter}}" />

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
  <Border
          Padding="20"
      Background="#F5F5F5"
    BorderBrush="#CCCCCC"
   BorderThickness="1"
     CornerRadius="5">
         <StackPanel>
     <TextBlock
       Margin="0,0,0,5"
      FontSize="14"
  FontWeight="SemiBold"
           Text="Titulo *" />
        <TextBox
            Height="32"
      Margin="0,0,0,15"
  Padding="8,5"
      HorizontalAlignment="Stretch"
       VerticalContentAlignment="Center"
            FontSize="14"
        MaxLength="200"
       TextWrapping="NoWrap"
     HorizontalScrollBarVisibility="Auto"
         Text="{Binding Titulo, UpdateSourceTrigger=PropertyChanged}" />

     <TextBlock
    Margin="0,0,0,5"
         FontSize="14"
  FontWeight="SemiBold"
       Text="Descripcion" />
      <TextBox
    Height="100"
            Margin="0,0,0,15"
     Padding="8"
    AcceptsReturn="True"
             FontSize="14"
           MaxLength="1000"
      Text="{Binding Descripcion, UpdateSourceTrigger=PropertyChanged}"
          TextWrapping="Wrap"
 VerticalScrollBarVisibility="Auto" />

       <TextBlock
         Margin="0,0,0,5"
          FontSize="14"
           FontWeight="SemiBold"
      Text="Fecha de Vencimiento" />
    <DatePicker
        Height="32"
           Margin="0,0,0,15"
    FontSize="14"
           SelectedDate="{Binding FechaVencimiento}" />

         <TextBlock
       Margin="0,0,0,5"
  FontSize="14"
         FontWeight="SemiBold"
            Text="Estado" />
    <ComboBox
      Height="32"
        Margin="0,0,0,15"
   FontSize="14"
          ItemsSource="{Binding Estados}"
SelectedItem="{Binding Estado}">
      <ComboBox.ItemTemplate>
                <DataTemplate>
       <TextBlock Text="{Binding}" />
         </DataTemplate>
     </ComboBox.ItemTemplate>
   </ComboBox>

    <TextBlock
           Margin="0,0,0,5"
 FontSize="14"
     FontWeight="SemiBold"
        Text="Prioridad" />
         <ComboBox
        Height="32"
             Margin="0,0,0,15"
         FontSize="14"
   ItemsSource="{Binding Prioridades}"
       SelectedItem="{Binding Prioridad}">
             <ComboBox.ItemTemplate>
   <DataTemplate>
            <TextBlock Text="{Binding}" />
        </DataTemplate>
          </ComboBox.ItemTemplate>
    </ComboBox>

            <TextBlock
      Margin="0,0,0,5"
              FontSize="14"
           FontWeight="SemiBold"
                 Text="Etiquetas" />
 <Border
  MaxHeight="150"
        Margin="0,0,0,15"
          Padding="5"
     Background="White"
           BorderBrush="#CCCCCC"
    BorderThickness="1"
      CornerRadius="3">
       <ScrollViewer VerticalScrollBarVisibility="Auto">
   <ItemsControl ItemsSource="{Binding EtiquetasDisponibles}">
   <ItemsControl.ItemTemplate>
           <DataTemplate>
             <Border
           Margin="3"
   Padding="8,5"
     Background="#F9F9F9"
      BorderBrush="#E0E0E0"
 BorderThickness="1"
          CornerRadius="3">
         <Grid>
    <Grid.ColumnDefinitions>
   <ColumnDefinition Width="Auto" />
     <ColumnDefinition Width="Auto" />
     <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

         <CheckBox
  Grid.Column="0"
              Margin="0,0,10,0"
               VerticalAlignment="Center"
         IsChecked="{Binding IsSelected}" />

  <Border
             Grid.Column="1"
         Width="20"
       Height="20"
      Margin="0,0,10,0"
            Background="{Binding Etiqueta.ColorHex}"
        BorderBrush="#CCCCCC"
           BorderThickness="1"
            CornerRadius="10" />

   <TextBlock
     Grid.Column="2"
     VerticalAlignment="Center"
         FontSize="13"
          Text="{Binding Etiqueta.Nombre}" />
    </Grid>
               </Border>
      </DataTemplate>
               </ItemsControl.ItemTemplate>
 </ItemsControl>
            </ScrollViewer>
         </Border>
  </StackPanel>
            </Border>
 </ScrollViewer>

   <StackPanel
      Grid.Row="2"
Margin="0,20,0,0"
HorizontalAlignment="Right"
   Orientation="Horizontal">
     <Button
       Width="100"
          Height="35"
 Margin="0,0,10,0"
     Command="{Binding SaveCommand}"
    Content="Guardar"
   FontSize="14"
      IsDefault="True" />
      <Button
    Width="100"
       Height="35"
      Command="{Binding CancelCommand}"
      Content="Cancelar"
  FontSize="14"
     IsCancel="True" />
     </StackPanel>

        <Grid
     Grid.RowSpan="3"
  Background="#80FFFFFF"
 Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
    <ProgressBar
        Width="200"
        Height="20"
IsIndeterminate="True" />
     <TextBlock
   Margin="0,10,0,0"
          FontSize="14"
   Text="Guardando..." />
         </StackPanel>
     </Grid>
 </Grid>
</Window>
