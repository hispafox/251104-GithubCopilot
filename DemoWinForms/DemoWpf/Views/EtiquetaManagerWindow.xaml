<Window
    x:Class="DemoWpf.Views.EtiquetaManagerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DemoWpf.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Gestor de Etiquetas"
    Width="700"
    Height="500"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
 <Grid Margin="20">
        <Grid.RowDefinitions>
         <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>

        <TextBlock
  Grid.Row="0"
            Margin="0,0,0,20"
     FontSize="20"
   FontWeight="Bold"
         Text="Gestor de Etiquetas" />

        <Border
            Grid.Row="1"
          Margin="0,0,0,15"
 Padding="15"
       Background="#F5F5F5"
            BorderBrush="#CCCCCC"
       BorderThickness="1"
    CornerRadius="5">
            <Grid>
            <Grid.ColumnDefinitions>
   <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

     <StackPanel Grid.Column="0">
        <TextBlock
         Margin="0,0,0,5"
         FontSize="12"
               FontWeight="SemiBold"
    Text="Nombre de la Etiqueta" />
       <TextBox
    Height="32"
         Padding="8"
  VerticalContentAlignment="Center"
          FontSize="14"
    MaxLength="50"
           Text="{Binding NuevoNombre, UpdateSourceTrigger=PropertyChanged}" />
      </StackPanel>

    <StackPanel Grid.Column="1" Margin="10,0,0,0">
        <TextBlock
      Margin="0,0,0,5"
         FontSize="12"
      FontWeight="SemiBold"
      Text="Color" />
     <Grid>
     <Grid.ColumnDefinitions>
   <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="80" />
         </Grid.ColumnDefinitions>
       <Border
           Grid.Column="0"
                   Width="32"
          Height="32"
                Margin="0,0,5,0"
    Background="{Binding NuevoColor}"
       BorderBrush="#CCCCCC"
     BorderThickness="1"
    CornerRadius="3" />
     <TextBox
      Grid.Column="1"
           Height="32"
           Padding="5"
     VerticalContentAlignment="Center"
     FontFamily="Consolas"
  FontSize="12"
         MaxLength="7"
     Text="{Binding NuevoColor, UpdateSourceTrigger=PropertyChanged}" />
       </Grid>
</StackPanel>

         <StackPanel Grid.Column="2" Margin="10,0,0,0">
 <TextBlock
 Margin="0,0,0,5"
   FontSize="12"
     Visibility="Hidden"
     Text="Acciones" />
              <StackPanel Orientation="Horizontal">
<Button
     Width="80"
  Height="32"
 Margin="0,0,5,0"
   Command="{Binding SaveEtiquetaCommand}"
   Content="{Binding IsEditing, Converter={StaticResource EditModeButtonConverter}}"
FontSize="12" />
         <Button
             Width="80"
         Height="32"
       Command="{Binding CancelEditCommand}"
       Content="Cancelar"
      FontSize="12"
   Visibility="{Binding IsEditing, Converter={StaticResource BoolToVisibilityConverter}}" />
  </StackPanel>
    </StackPanel>
            </Grid>
        </Border>

        <Border
          Grid.Row="2"
    BorderBrush="#CCCCCC"
            BorderThickness="1"
      CornerRadius="5">
            <ListBox
  Padding="5"
         ItemsSource="{Binding Etiquetas}"
SelectedItem="{Binding SelectedEtiqueta}">
   <ListBox.ItemTemplate>
   <DataTemplate>
          <Border
           Margin="5"
  Padding="10"
         Background="White"
         BorderBrush="#E0E0E0"
        BorderThickness="1"
             CornerRadius="5">
               <Grid>
             <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
 <ColumnDefinition Width="*" />
     <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>

        <Border
  Grid.Column="0"
        Width="30"
              Height="30"
   Margin="0,0,10,0"
         Background="{Binding ColorHex}"
    BorderBrush="#CCCCCC"
   BorderThickness="1"
   CornerRadius="15" />

       <TextBlock
     Grid.Column="1"
 VerticalAlignment="Center"
  FontSize="14"
    FontWeight="SemiBold"
           Text="{Binding Nombre}" />

 <StackPanel Grid.Column="2" Orientation="Horizontal">
        <Button
           Width="60"
         Height="28"
       Margin="5,0"
  Command="{Binding DataContext.StartEditCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
  CommandParameter="{Binding}"
 Content="Editar"
      FontSize="11" />
           <Button
         Width="70"
Height="28"
        Command="{Binding DataContext.DeleteEtiquetaCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
CommandParameter="{Binding}"
           Content="Eliminar"
       FontSize="11" />
          </StackPanel>
              </Grid>
      </Border>
    </DataTemplate>
                </ListBox.ItemTemplate>
        </ListBox>
    </Border>

        <Button
Grid.Row="3"
            Width="100"
            Height="35"
 Margin="0,15,0,0"
   HorizontalAlignment="Right"
         Click="CloseButton_Click"
   Content="Cerrar"
            FontSize="14" />

        <Grid
    Grid.RowSpan="4"
            Background="#80FFFFFF"
            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar
   Width="200"
  Height="20"
      IsIndeterminate="True" />
    <TextBlock
 Margin="0,10,0,0"
         FontSize="14"
       Text="Procesando..." />
            </StackPanel>
        </Grid>
    </Grid>
</Window>
